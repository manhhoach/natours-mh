{
	"info": {
		"_postman_id": "d1d87bd0-1099-4f1d-8e12-311b4c96f54f",
		"name": "Natours",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Tour",
			"item": [
				{
					"name": "Get all Tours",
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"host": true,
							"user-agent": true,
							"accept": true,
							"accept-encoding": true,
							"connection": true
						}
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
								"key": "Authorization",
								"value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxNDg4ZmZhZTIwNGE0MmExNDQ3ZDgwMiIsImlhdCI6MTYzMjE0NTQxNSwiZXhwIjoxNjMyOTIzMDE1fQ.UNg2_OU5Z9Fa9WGGoskdWbtU6VBsj_R3mez1sIq-P7o",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get 5 Tour cheapest",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/top-5-cheap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"top-5-cheap"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Tour",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/615d08cc8bdd91c0d1b58fb4",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"615d08cc8bdd91c0d1b58fb4"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get tour with filter",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours?sort=duration&sort=price",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours"
							],
							"query": [
								{
									"key": "sort",
									"value": "duration"
								},
								{
									"key": "sort",
									"value": "price"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Tour",
					"protocolProfileBehavior": {
						"disabledSystemHeaders": {
							"accept-encoding": true,
							"user-agent": true,
							"accept": true,
							"connection": true
						}
					},
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "name",
									"value": "New test tour",
									"type": "text"
								},
								{
									"key": "duration",
									"value": "12",
									"type": "text"
								},
								{
									"key": "maxGroupSize",
									"value": "10",
									"type": "text"
								},
								{
									"key": "difficulty",
									"value": "easy",
									"type": "text"
								},
								{
									"key": "ratingsAverage",
									"value": "5",
									"type": "text"
								},
								{
									"key": "ratingsQuantity",
									"value": "2",
									"type": "text"
								},
								{
									"key": "price",
									"value": "9991",
									"type": "text"
								},
								{
									"key": "summary",
									"value": "Surfing, skating, parajumping, rock climbing and more, all in one tour",
									"type": "text"
								},
								{
									"key": "description",
									"value": "Nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate ",
									"type": "text"
								},
								{
									"key": "imageCover",
									"value": "tour-6-cover.jpg",
									"type": "text"
								},
								{
									"key": "images",
									"value": "[tour-6-1.jpg,tour-6-2.jpg,tour-6-3.jpg]",
									"type": "text"
								},
								{
									"key": "startDates",
									"value": "2021-07-19,10:00",
									"type": "text"
								},
								{
									"key": "priceDiscount",
									"value": "9990",
									"type": "text"
								},
								{
									"key": "secretTour",
									"value": "false",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/tours",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Tour Stat",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/tour-stats",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"tour-stats"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Tour",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Tou with Aggregate",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours?difficulty=easy&duration[gte]=5&limit=5&price[lt]=1500",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours"
							],
							"query": [
								{
									"key": "difficulty",
									"value": "easy"
								},
								{
									"key": "duration[gte]",
									"value": "5"
								},
								{
									"key": "limit",
									"value": "5"
								},
								{
									"key": "price[lt]",
									"value": "1500"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Tour",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "name",
									"value": "Ha Long Bay",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/615d08cc8bdd91c0d1b58fb4",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"615d08cc8bdd91c0d1b58fb4"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get tour with Radius",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/tours-within/400/center/34.11,-118.11/unit/mi",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"tours-within",
								"400",
								"center",
								"34.11,-118.11",
								"unit",
								"mi"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get tour with Geospatial",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/distances/30.11,118.11/unit/mi",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"distances",
								"30.11,118.11",
								"unit",
								"mi"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "User",
			"item": [
				{
					"name": "Sign-up",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.environment.set(\"jwt\",pm.response.json().token );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "name",
									"value": "decade",
									"type": "text"
								},
								{
									"key": "email",
									"value": "hello@gmail.com",
									"type": "text"
								},
								{
									"key": "password",
									"value": "manh123456",
									"type": "text"
								},
								{
									"key": "passwordConfirm",
									"value": "manh123456",
									"type": "text"
								},
								{
									"key": "passwordChangedAt",
									"value": "2021-04-30",
									"type": "text",
									"disabled": true
								},
								{
									"key": "role",
									"value": "guide",
									"type": "text",
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/users/signup",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get all user",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/users",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.environment.set(\"jwt\",pm.response.json().token );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "email",
									"value": "admin@gmail.com",
									"type": "text"
								},
								{
									"key": "password",
									"value": "manh123456",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/users/login",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.environment.set(\"jwt\",pm.response.json().token );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "password",
									"value": "manh123456",
									"type": "text"
								},
								{
									"key": "passwordConfirm",
									"value": "manh123456",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/users/resetPassword/b507fdc49b4c27fbc7028dadf282aee3781cc3842ce7667e3e2b8d556f584d2e",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"resetPassword",
								"b507fdc49b4c27fbc7028dadf282aee3781cc3842ce7667e3e2b8d556f584d2e"
							]
						}
					},
					"response": []
				},
				{
					"name": "Forgot Password",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "email",
									"value": "test@gmail.com",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/users/forgotPassword",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"forgotPassword"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update current user",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "password",
									"value": "manh123456",
									"type": "text",
									"disabled": true
								},
								{
									"key": "name",
									"value": "chào cụ mạnh",
									"type": "text"
								},
								{
									"key": "role",
									"value": "admin",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/users/updateMe",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"updateMe"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Password",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.environment.set(\"jwt\",pm.response.json().token );"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "passwordCurrent",
									"value": "manh123456",
									"type": "text"
								},
								{
									"key": "password",
									"value": "123456az",
									"type": "text"
								},
								{
									"key": "passwordConfirm",
									"value": "123456az",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/users/updateMyPassword",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"updateMyPassword"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete current user",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/users/deleteMe",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"deleteMe"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete User",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/users/615d6d5f7a34cc5317c8c606",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"615d6d5f7a34cc5317c8c606"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get current user",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/users/me",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"users",
								"me"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Review",
			"item": [
				{
					"name": "Create review",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"review\":\"ok! Tour is very nice\",\r\n    \"rating\":5,\r\n    \"tour\":\"5c88fa8cf4afda39709c2955\",\r\n    \"user\":\"615d6d5f7a34cc5317c8c606\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/reviews",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get all reviews",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/reviews",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Review",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/reviews/615fbf605fae1e99c26d6b3e",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"reviews",
								"615fbf605fae1e99c26d6b3e"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update review",
					"request": {
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/reviews/615d6dae7a34cc5317c8c60a",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"reviews",
								"615d6dae7a34cc5317c8c60a"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get review",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/reviews/61600e624bda4d2951beaea6",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"reviews",
								"61600e624bda4d2951beaea6"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Tours/Reviews",
			"item": [
				{
					"name": "Get all review on tour",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/615d08cc8bdd91c0d1b58fb4/reviews",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"615d08cc8bdd91c0d1b58fb4",
								"reviews"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create review on tour",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"rating\":5,\r\n    \"review\":\"This is best tour\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8888/api/v1/tours/5c88fa8cf4afda39709c2955/reviews",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8888",
							"path": [
								"api",
								"v1",
								"tours",
								"5c88fa8cf4afda39709c2955",
								"reviews"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}